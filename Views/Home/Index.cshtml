@model OnlineBloggingPlatform.ViewModels.HomeViewModel
@{
    ViewData["Title"] = "Home";
}

<!-- Hero Section -->
<section class="hero-section">
    <div class="container">
        <div class="row align-items-center">
            <div class="col-lg-6 hero-content">
                <h1 class="hero-title display-font">Share Your Stories with the World</h1>
                <p class="hero-subtitle">
                    Join our vibrant community of writers and readers. Create beautiful blog posts, 
                    connect with like-minded individuals, and build your online presence.
                </p>
                <div class="hero-buttons">
                    @if (User.Identity?.IsAuthenticated == true)
                    {
                        <a href="@Url.Action("Create", "Blog")" class="btn btn-primary btn-lg me-3">
                            <i class="fas fa-plus"></i> Create Your First Post
                        </a>
                    }
                    else
                    {
                        <a href="@Url.Action("Register", "Account")" class="btn btn-primary btn-lg me-3">
                            <i class="fas fa-user-plus"></i> Get Started
                        </a>
                    }
                    <a href="@Url.Action("Search", "Home")" class="btn btn-outline-light btn-lg">
                        <i class="fas fa-search"></i> Browse Posts
                    </a>
                </div>
            </div>
            <div class="col-lg-6 d-none d-lg-block">
                <div class="hero-image text-center">
                    <i class="fas fa-blog" style="font-size: 15rem; color: rgba(255,255,255,0.1);"></i>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Featured Posts Section -->
@if (Model.FeaturedPosts.Any())
{
    <section class="py-5">
        <div class="container">
            <div class="row mb-4">
                <div class="col-12">
                    <h2 class="display-font mb-3">
                        <i class="fas fa-star text-warning"></i> Featured Posts
                    </h2>
                    <p class="lead text-muted">Discover our handpicked selection of outstanding articles</p>
                </div>
            </div>
            <div class="row">
                @foreach (var post in Model.FeaturedPosts.Take(3))
                {
                    <div class="col-lg-4 col-md-6 mb-4">
                        <article class="card post-card h-100">
                            @if (!string.IsNullOrEmpty(post.FeaturedImageUrl))
                            {
                                <img src="@post.FeaturedImageUrl" class="card-img-top" alt="@post.Title">
                            }
                            else
                            {
                                <div class="card-img-top bg-gradient d-flex align-items-center justify-content-center" style="height: 200px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">
                                    <i class="fas fa-image text-white" style="font-size: 3rem; opacity: 0.5;"></i>
                                </div>
                            }
                            <div class="card-body d-flex flex-column">
                                @if (post.Category != null)
                                {
                                    <a href="@Url.Action("Category", "Blog", new { id = post.CategoryId })" class="category-badge mb-2 align-self-start">
                                        <i class="@post.Category.IconClass"></i> @post.Category.Name
                                    </a>
                                }
                                <h5 class="card-title">
                                    <a href="@Url.Action("Post", "Blog", new { slug = post.Slug })" class="text-decoration-none">
                                        @post.Title
                                    </a>
                                </h5>
                                <p class="card-text post-excerpt flex-grow-1">@post.Excerpt</p>
                                <div class="post-meta">
                                    <i class="fas fa-user"></i> @post.User.FirstName @post.User.LastName
                                    <i class="fas fa-calendar ms-2"></i> @post.PublishedAt?.ToString("MMM dd, yyyy")
                                    <i class="fas fa-eye ms-2"></i> @post.ViewCount
                                </div>
                            </div>
                        </article>
                    </div>
                }
            </div>
        </div>
    </section>
}

<!-- Categories Section -->
@if (Model.Categories.Any())
{
    <section class="py-5 bg-light">
        <div class="container">
            <div class="row mb-4">
                <div class="col-12 text-center">
                    <h2 class="display-font mb-3">
                        <i class="fas fa-th-large text-primary"></i> Explore Categories
                    </h2>
                    <p class="lead text-muted">Find content that matches your interests</p>
                </div>
            </div>
            <div class="row">
                @foreach (var category in Model.Categories.Take(6))
                {
                    <div class="col-lg-2 col-md-4 col-sm-6 mb-4">
                        <a href="@Url.Action("Category", "Blog", new { id = category.Id })" class="category-card d-block">
                            <div class="category-icon">
                                <i class="@category.IconClass"></i>
                            </div>
                            <h6 class="fw-bold mb-2">@category.Name</h6>
                            <p class="text-muted small">@category.Description</p>
                        </a>
                    </div>
                }
            </div>
        </div>
    </section>
}

<!-- Latest Posts Section -->
@if (Model.LatestPosts.Any())
{
    <section class="py-5">
        <div class="container">
            <div class="row mb-4">
                <div class="col-md-6">
                    <h2 class="display-font mb-3">
                        <i class="fas fa-clock text-info"></i> Latest Posts
                    </h2>
                    <p class="lead text-muted">Stay up to date with fresh content</p>
                </div>
                <div class="col-md-6 text-md-end">
                    <a href="@Url.Action("Search", "Home")" class="btn btn-outline-primary">
                        <i class="fas fa-arrow-right"></i> View All Posts
                    </a>
                </div>
            </div>
            <div class="row">
                @foreach (var post in Model.LatestPosts.Take(6))
                {
                    <div class="col-lg-4 col-md-6 mb-4">
                        <article class="card post-card h-100">
                            @if (!string.IsNullOrEmpty(post.FeaturedImageUrl))
                            {
                                <img src="@post.FeaturedImageUrl" class="card-img-top" alt="@post.Title" style="height: 150px;">
                            }
                            <div class="card-body d-flex flex-column">
                                @if (post.Category != null)
                                {
                                    <a href="@Url.Action("Category", "Blog", new { id = post.CategoryId })" class="category-badge mb-2 align-self-start">
                                        <i class="@post.Category.IconClass"></i> @post.Category.Name
                                    </a>
                                }
                                <h6 class="card-title">
                                    <a href="@Url.Action("Post", "Blog", new { slug = post.Slug })" class="text-decoration-none">
                                        @post.Title
                                    </a>
                                </h6>
                                <p class="card-text post-excerpt flex-grow-1 small">
                                    @(post.Excerpt?.Length > 80 ? post.Excerpt.Substring(0, 80) + "..." : post.Excerpt)
                                </p>
                                <div class="post-meta small">
                                    <i class="fas fa-user"></i> @post.User.FirstName @post.User.LastName
                                    <i class="fas fa-calendar ms-2"></i> @post.PublishedAt?.ToString("MMM dd")
                                    <i class="fas fa-eye ms-2"></i> @post.ViewCount
                                </div>
                            </div>
                        </article>
                    </div>
                }
            </div>
        </div>
    </section>
}

<!-- Popular Posts Sidebar -->
@if (Model.PopularPosts.Any())
{
    <section class="py-5 bg-light">
        <div class="container">
            <div class="row">
                <div class="col-lg-8">
                    <div class="row">
                        <div class="col-12 mb-4">
                            <h2 class="display-font">
                                <i class="fas fa-fire text-danger"></i> Trending This Week
                            </h2>
                        </div>
                    </div>
                    <div class="row">
                        @foreach (var post in Model.PopularPosts.Take(4))
                        {
                            <div class="col-md-6 mb-4">
                                <article class="card post-card h-100">
                                    <div class="row g-0">
                                        <div class="col-4">
                                            @if (!string.IsNullOrEmpty(post.FeaturedImageUrl))
                                            {
                                                <img src="@post.FeaturedImageUrl" class="img-fluid h-100 w-100 object-cover" alt="@post.Title">
                                            }
                                            else
                                            {
                                                <div class="bg-gradient h-100 d-flex align-items-center justify-content-center" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">
                                                    <i class="fas fa-image text-white"></i>
                                                </div>
                                            }
                                        </div>
                                        <div class="col-8">
                                            <div class="card-body p-3">
                                                <h6 class="card-title mb-2">
                                                    <a href="@Url.Action("Post", "Blog", new { slug = post.Slug })" class="text-decoration-none">
                                                        @(post.Title.Length > 50 ? post.Title.Substring(0, 50) + "..." : post.Title)
                                                    </a>
                                                </h6>
                                                <div class="post-meta small">
                                                    <i class="fas fa-eye"></i> @post.ViewCount views
                                                    <br>
                                                    <i class="fas fa-calendar"></i> @post.PublishedAt?.ToString("MMM dd")
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </article>
                            </div>
                        }
                    </div>
                </div>
                <div class="col-lg-4">
                    <div class="card">
                        <div class="card-body text-center">
                            <h5 class="card-title display-font">Join Our Community</h5>
                            <p class="card-text">Connect with writers and readers from around the world.</p>
                            @if (User.Identity?.IsAuthenticated != true)
                            {
                                <a href="@Url.Action("Register", "Account")" class="btn btn-primary">
                                    <i class="fas fa-user-plus"></i> Sign Up Today
                                </a>
                            }
                            else
                            {
                                <a href="@Url.Action("Create", "Blog")" class="btn btn-primary">
                                    <i class="fas fa-plus"></i> Write a Post
                                </a>
                            }
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
}

<!-- Newsletter Section -->
<section class="py-5" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">
    <div class="container">
        <div class="row justify-content-center text-center text-white">
            <div class="col-lg-6">
                <h2 class="display-font mb-3">Stay in the Loop</h2>
                <p class="lead mb-4">Get the latest posts and updates delivered straight to your inbox.</p>
                <form class="d-flex justify-content-center">
                    <div class="input-group" style="max-width: 400px;">
                        <input type="email" class="form-control" placeholder="Enter your email address">
                        <button class="btn btn-warning" type="submit">
                            <i class="fas fa-paper-plane"></i> Subscribe
                        </button>
                    </div>
                </form>
                <small class="text-white-50 mt-2 d-block">No spam, unsubscribe at any time.</small>
            </div>
        </div>
    </div>
</section>

@section Scripts {
    <script>
        // Add staggered animation to cards
        document.addEventListener('DOMContentLoaded', function() {
            const cards = document.querySelectorAll('.post-card, .category-card');
            cards.forEach((card, index) => {
                card.style.animationDelay = `${index * 0.1}s`;
                card.classList.add('card-animate');
            });
        });
    </script>
}